from simpleai.search import CspProblem, backtrack  # Импорт классов для решения задач удовлетворения ограничений

def constraint_func(names, values):
    """Функция ограничения: проверяет, что значения двух переменных не равны"""
    return values[0] != values[1]  # Цвета двух людей должны быть разными

if __name__ == '__main__':
    # Определение переменных - имен людей, которым нужно назначить цвета
    names = ('Марк', 'Джулия', 'Стив', 'Аманда', 'Брайан', 
             'Джоанн', 'Дерек', 'Аллан', 'Мишель', 'Келли')
    
    # Создание доменов (возможных значений) для каждой переменной
    # Каждый человек может быть покрашен в один из 4 цветов: красный, зеленый, синий или серый
    colors = dict((name, ['красный', 'зелёный', 'синий', 'серый']) for name in names)

    # Определение ограничений задачи
    # Каждое ограничение представляет собой пару людей, которые не могут иметь одинаковый цвет
    constraints = [
        # Марк не может иметь тот же цвет, что и Джулия и Стив
        (('Марк', 'Джулия'), constraint_func),
        (('Марк', 'Стив'), constraint_func),
        
        # Джулия имеет много связей - не может иметь тот же цвет, что и несколько людей
        (('Джулия', 'Стив'), constraint_func),
        (('Джулия', 'Аманда'), constraint_func),
        (('Джулия', 'Дерек'), constraint_func),
        (('Джулия', 'Брайан'), constraint_func),
        
        # Ограничения для Стива
        (('Стив', 'Аманда'), constraint_func),
        (('Стив', 'Аллан'), constraint_func),
        (('Стив', 'Мишель'), constraint_func),
        
        # Ограничения для Аманды
        (('Аманда', 'Мишель'), constraint_func),
        (('Аманда', 'Джоанн'), constraint_func),
        (('Аманда', 'Дерек'), constraint_func),
        
        # Ограничения для Брайана
        (('Брайан', 'Дерек'), constraint_func),
        (('Брайан', 'Келли'), constraint_func),
        
        # Ограничения для Джоанн
        (('Джоанн', 'Мишель'), constraint_func),
        (('Джоанн', 'Аманда'), constraint_func),  # Дублирует предыдущее ограничение Аманда-Джоанн
        (('Джоанн', 'Дерек'), constraint_func),
        (('Джоанн', 'Келли'), constraint_func),
        
        # Ограничения для Дерека
        (('Дерек', 'Келли'), constraint_func),
    ]

    # Создание объекта задачи удовлетворения ограничений (CSP)
    problem = CspProblem(names, colors, constraints)

    # Решение задачи с помощью алгоритма обратного отслеживания (backtracking)
    output = backtrack(problem)
    
    # Вывод результатов
    print('\nРаспределение цветов:\n')
    for k, v in output.items():
        print(k, '==>', v)