from simpleai.search import CspProblem, backtrack  # Импорт классов для решения задач удовлетворения ограничений

def constraint_func(names, values):
    """Функция ограничения: проверяет, что значения двух переменных не равны"""
    return values[0] != values[1]  # Цвета двух людей должны быть разными

if __name__ == '__main__':
    # Определение переменных - имен людей, которым нужно назначить цвета
    names = ('Владимир', 'Денис', 'Сергей', 'Марат', 'Борис', 
             'Егор', 'Александр', 'Павел', 'Светлана', 'Слава')
    
    # Создание доменов (возможных значений) для каждой переменной
    # Каждый человек может быть покрашен в один из 4 цветов: красный, зеленый, синий или серый
    colors = dict((name, ['красный', 'зелёный', 'синий', 'серый']) for name in names)

    # Определение ограничений задачи
    # Каждое ограничение представляет собой пару людей, которые не могут иметь одинаковый цвет
    constraints = [
        # Владимир не может иметь тот же цвет, что и Денис и Сергей
        (('Владимир', 'Денис'), constraint_func),
        (('Владимир', 'Сергей'), constraint_func),
        
        # Денис имеет много связей - не может иметь тот же цвет, что и несколько людей
        (('Денис', 'Сергей'), constraint_func),
        (('Денис', 'Марат'), constraint_func),
        (('Денис', 'Александр'), constraint_func),
        (('Денис', 'Борис'), constraint_func),
        
        # Ограничения для Сергейа
        (('Сергей', 'Марат'), constraint_func),
        (('Сергей', 'Павел'), constraint_func),
        (('Сергей', 'Светлана'), constraint_func),
        
        # Ограничения для Аманды
        (('Марат', 'Светлана'), constraint_func),
        (('Марат', 'Егор'), constraint_func),
        (('Марат', 'Александр'), constraint_func),
        
        # Ограничения для Бориса
        (('Борис', 'Александр'), constraint_func),
        (('Борис', 'Слава'), constraint_func),
        
        # Ограничения для Егор
        (('Егор', 'Светлана'), constraint_func),
        (('Егор', 'Марат'), constraint_func),  # Дублирует предыдущее ограничение Марат-Егор
        (('Егор', 'Александр'), constraint_func),
        (('Егор', 'Слава'), constraint_func),
        
        # Ограничения для Александра
        (('Александр', 'Слава'), constraint_func),
    ]

    # Создание объекта задачи удовлетворения ограничений (CSP)
    problem = CspProblem(names, colors, constraints)

    # Решение задачи с помощью алгоритма обратного отслеживания (backtracking)
    output = backtrack(problem)
    
    # Вывод результатов
    print('\nРаспределение цветов:\n')
    for k, v in output.items():
        print(k, '==>', v)